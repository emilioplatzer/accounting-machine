language: node_js
node_js:
  - "0.12.7"
  - "4.4.1"
  - "5.9.1"
matrix:
  fast_finish: true
  allow_failures:
    - node_js: "5.9.1" 
script: "npm run-script test-ci"
after_script: "npm install coveralls@2.11.8 && cat ./coverage/lcov.info | coveralls"
addons:
  postgresql: "9.1"
before_script:
  - psql < ./test/setup/create_test_db.sql
  - psql test_accounting_db < ./test/setup/create_test_schema.sql
  - cp travis-test-config.yaml local-test-config.yaml
  - npm run transpile-install
  - npm run transpile-install-test
  - npm run transpile-run